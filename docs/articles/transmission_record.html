<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Transmission Record • SIMPLEGEN</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="The Transmission Record">
<meta property="og:description" content="SIMPLEGEN">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">SIMPLEGEN</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/installation.html">Installation</a>
    </li>
    <li>
      <a href="../articles/getting_started.html">Getting started: simulating epidemiological data</a>
    </li>
    <li class="divider">
    <li>
      <a href="../articles/model_description.html">Epidemiological model details</a>
    </li>
    <li>
      <a href="../articles/transmission_record.html">Pruning the transmission record</a>
    </li>
    <li>
      <a href="../articles/simulating_relatedness.html">Simulating relatedness</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mrc-ide/SIMPLEGEN">
    <span class="fas fa-github"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="transmission_record_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>The Transmission Record</h1>
                        <h4 class="author">Bob Verity</h4>
            
            <h4 class="date">2021-08-06</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/mrc-ide/SIMPLEGEN/blob/master/vignettes/transmission_record.Rmd"><code>vignettes/transmission_record.Rmd</code></a></small>
      <div class="hidden name"><code>transmission_record.Rmd</code></div>

    </div>

    
    
<!---
Example comment
-->
<p>In the second step of the SIMPLEGEN pipeline the output of our transmission model is stored in a file called the <em>transmission record</em>. This vignette describes the format of the transmission record, and explains the logic behind storing information in this way.</p>
<div id="what-information-do-we-need-to-track" class="section level3">
<h3 class="hasAnchor">
<a href="#what-information-do-we-need-to-track" class="anchor"></a>What information do we need to track?</h3>
<p>When we simulate from a transmission model there are typically many thousands or even millions of events that take place. Some of these events have the <em>potential</em> to impact the genotypes that we see in our final sample of infected people - this does not mean they definitely <em>will</em> impact the observed genotypes, just that that <em>could</em> in theory impact them. A good example is a host being bitten by two infectious mosquitoes; this could result in a polyclonal infection if the mosquitoes carry different genotypes, or it could result in a monoclonal infection if the mosquitoes carry the same genotype.</p>
<p>On the other hand, there are many events that cannot impact the genotypes we see in our final sample. A good example is a human host dying, either as a result of infection or just old age. If a host dies then by definition it will not make it into our final sample of malaria-positive people, and so tracking this event would be a waste of time and computer memory.</p>
<p>Overall, the purpose of the transmission record is <strong>to keep a record of all events that have the potential to impact the genotypes in the final sample</strong>. This will allow us to use the transmission record to generate genotypes outside of the main simulation. A secondary aim is to do this <strong>in a computationally efficient way</strong>, retaining only the minimum information required. Simulations can get quite intensive, and so aiming for efficiency at this early stage can help keep file sizes small. Finally, we aim to do this <strong>in a flexible way</strong>, thereby ensuring that as many models as possible can access the pipeline.</p>
<p>These three aims are slightly at odds with one another, and there is no single file format that will achieve all three perfectly. In the following we have tried to strike a balance that permits reasonably complex models while still keeping file sizes quite small.</p>
</div>
<div id="tracking-infections-not-genotypes" class="section level3">
<h3 class="hasAnchor">
<a href="#tracking-infections-not-genotypes" class="anchor"></a>Tracking infections, not genotypes</h3>
<p>The transmission record works with <em>infections</em>, defined in this context as <strong>a population of parasites passed between human host and mosquito at the point of biting</strong>. Thus, a single infection can contain multiple genotypes or a single genotype. When we track infections we are simply making a note that a particular person had the potential to receive parasites from a particular mosquito, or vice versa. We are not thinking about more complex things like genetic drift or recombination which will be dealt with later.</p>
<p>We can now specify one of the most important assumptions of the SIMPLEGEN pipeline:</p>
<p><strong>We assume that the genotypes within an infection have no direct impact on disease progression or onward transmissibility.</strong></p>
<p>This is a tricky statement to unpack, and actually allows for quite a wide range of models. In the simplest case we can think of genotypes separated by neutral mutations, i.e. those that confer no selective advantage to the parasite. In this case the frequencies of the different genotypes will drift up and down over time, perhaps undergoing strong bottlenecking at times, but crucially the relative frequencies will have no bearing on the overall progression of disease (otherwise they would not be neutral mutations). There can be a lot of information in patterns of neutral mutation, and so generating this sort of data will be one of the main use-cases of SIMPLEGEN.</p>
<p>We can also think of examples that violate this assumption. We can imagine a model in which a particular genotype confers resistance to a common antimalarial drug, increasing the chance that an infection persists even after treatment. Here the presence or absence of the drug resistant gene directly impacts the progression of the disease, and so we would need to know genotypes at the time of simulating. This example would therefore not fit well within our framework.</p>
<p>Not all models and research questions will fit neatly within this framework, but many transmission models use something akin to infections internally and so hopefully can be modified to produce output that can be used by SIMPLEGEN.</p>
</div>
<div id="working-with-infection-ids" class="section level3">
<h3 class="hasAnchor">
<a href="#working-with-infection-ids" class="anchor"></a>Working with infection IDs</h3>
<p>Figure 1 gives an example of an infection being passed from a human host to a mosquito. There are several different IDs here: the human has <span style="color: red;"><b>ID 21</b></span>, the mosquito has <span style="color: blue;"><b>ID 33</b></span>, and the infection IDs are shown inside the small circles. The human initially carries infection ID 1, which then becomes infection ID 2 when it is passed to the mosquito. We can say that infection ID 1 is the parent of infection ID 2.</p>
<img src="https://raw.githubusercontent.com/mrc-ide/SIMPLEGEN/develop/R_ignore/images/transmission_record_single.png" width="100" height="100"><font size="2">
<figcaption><strong>Figure 1</strong> Example of a human passing infection to a mosquito.
</figcaption><p></p></font>
<img src="https://raw.githubusercontent.com/mrc-ide/SIMPLEGEN/develop/R_ignore/images/transmission_record.png" width="100" height="200"><font size="2">
<figcaption><strong>Figure 1</strong> Transmission record diagram.
</figcaption><p></p></font>
<p>Text</p>
<img src="https://raw.githubusercontent.com/mrc-ide/SIMPLEGEN/develop/R_ignore/images/transmission_record_table.png" width="100" height="200"><font size="2">
<figcaption><strong>Figure 1</strong> Transmission record diagram.
</figcaption><p></p></font>
<p>Text</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Bob Verity, Sophie Berube, Daniel Larremore.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
